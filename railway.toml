[build]
builder = "nixpacks"
buildCommand = "pnpm install && pnpm --filter @conferencia/web build && pnpm --filter @conferencia/api build"

[deploy]
startCommand = "cd apps/api && npm start"
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# Full Stack Configuration - Railway
# Frontend + API serving from same domain
# Frontend: turismocinematografico.com.br
# API: turismocinematografico.com.br/api/*